* Algorithm for downloading events for a particular day
** Request device and user codes
*** [17:54:01] nostril-watcher:~/projects/rust/oauth2-rs$ curl -d "client_id=873648397769-eba22ohhel0t30e37dib506540vjdb25.apps.googleusercontent.com&scope=https://www.googleapis.com/auth/calenar.readonly" https://accounts.google.com/o/oauth2/device/code
{
  "device_code": "AH-1Ng2UWOD6PAtnTo3EDATCXC8RLEIz-yUiUPKUjLzeCANbVSpc733HyAaw3TUMsipbp1lFUhMMC0OoVHNQcD7Eh143aXof0A",
  "user_code": "PPN-DCV-PYC",
  "expires_in": 1800,
  "interval": 5,
  "verification_url": "https://www.google.com/device"
}
** Poll Google's authorisation server 
*** Before user authorises
**** [18:04:23] nostril-watcher:~/projects/rust/oauth2-rs$ curl -d "client_id=873648397769-eba22ohhel0t30e37dib506540vjdb25.apps.googleusercontent.com&&client_secret=miaNRI8ECPVbiAaKWgiw6a3S&cod=AH-1Ng2UWOD6PAtnTo3EDATCXC8RLEIz-yUiUPKUjLzeCANbVSpc733HyAaw3TUMsipbp1lFUhMMC0OoVHNQcD7Eh143aXof0A&grant_type=http://oauth.net/grant_type/device/1.0" -H "Content-Type: application/x-www-form-urlencoded" https://www.googleapis.com/oauth2/v4/token
{
  "error": "authorization_pending",
  "error_description": "Precondition Failed"
}
*** After user authorises
**** [18:05:12] nostril-watcher:~/projects/rust/oauth2-rs$ curl -d "client_id=873648397769-eba22ohhel0t30e37dib506540vjdb25.apps.googleusercontent.com&&client_secret=miaNRI8ECPVbiAaKWgiw6a3S&cod=AH-1Ng2UWOD6PAtnTo3EDATCXC8RLEIz-yUiUPKUjLzeCANbVSpc733HyAaw3TUMsipbp1lFUhMMC0OoVHNQcD7Eh143aXof0A&grant_type=http://oauth.net/grant_type/device/1.0&access_type=offline" -H "Content-Type: application/x-www-form-urlencoded" https://www.googleapis.com/oauth2/v4/token
{
  "access_token": "ya29.GlsAB9Mc30wmGv22K3b-b35uCDpJuM2XDMttn-aZgjJ4_u9Afn0kKohxwj4mN5aQGeHbomdQQGeYWjzAoURfAGX9DRgv6xvVFjQn8e_f4sHd7dQB-gx4yI3_0_LV",
  "expires_in": 3600,
  "refresh_token": "1/sy2xGz95qrblDfU1BjGXNa3uMMNTS--jbBQLhWv8oXoYxPi-t65S26uaXvsEI1Sd",
  "scope": "https://www.googleapis.com/auth/calendar.readonly",
  "token_type": "Bearer"
}
** Use of refresh_token
*** [19:39:50] nostril-watcher:~/projects/rust/oauth2-rs$ curl -d "client_id=873648397769-eba22ohhel0t30e37dib506540vjdb25.apps.googleusercontent.com&&client_secret=miaNRI8ECPVbiAaKWgiw6a3S&&grant_type=refresh_token&refresh_token=1/sy2xGz95qrblDfU1BjGXNa3uMMNTS--jbBQLhWv8oXoYxPi-t65S26uaXvsEI1Sd" -H "Content-Type: application/x-www-form-urlencoded" https://www.googleapis.com/oauth2/v4/token
{
  "access_token": "ya29.GlsAB3s1e-Dce11XjsK0vSP4niNh5vlzsfAyWpR58l98ypMY1OdYZLzP-oMA14owXkzW4ofmwy0GjUrDe1U0VFprtrkcy9Ax5lOpKmO12qzbwJD1QdzbY87M3dKc",
  "expires_in": 3600,
  "scope": "https://www.googleapis.com/auth/calendar.readonly",
  "token_type": "Bearer"
}
** Reading events
*** [22:32:03] nostril-watcher:~/projects/rust/oauth2-rs$( curl -H "Authorization: Bearer ya29.GlwCB_KcVXncDP1aQb1eKcFhB97poJYQ0CK9ng2aQTaAmFl1v9aVpkjC54FG4XOjaDAtqJ3UPd1-nObRCvQuO9Vx9PsrEKs6m41W0cXK04vizyF7ZhdM5KoGyqMpcw Accept: application/json " "https://www.googleapis.com/calendar/v3/calendars/primary/events?timeMin=2019-05-05T23:59:59-00:00&timeMax=2019-05-07T00:00:00-00:00&maxResults=1&singleEvents=true" )|less
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  1470  100  1470    0     0   7736      0 --:--:-- --:--:-- --:--:--  7696
{
 "kind": "calendar#events",
 "etag": "\"p32cerqe1mm2u40g\"",
 "summary": "k1eran.wh17e@gmail.com",
 "updated": "2019-05-05T22:17:08.751Z",
 "timeZone": "Europe/London",
 "accessRole": "owner",
 "defaultReminders": [
  {
   "method": "popup",
   "minutes": 30
  }
 ],
 "nextPageToken": "CkgKOjZncG0yY2o0Y2txajRiOXBjOHJqMmI5azZzcTM0YmIyNmxpMzBiOXBjb3AzNnBqNWM0cG00ZWI1NmcYASCAgICBz8jo0xYaDQgAEgAYmO3pwbWF4gI=",
 "items": [
  {
   "kind": "calendar#event",
   "etag": "\"3113654721992000\"",
   "id": "6gpm2cj4ckqj4b9pc8rj2b9k6sq34bb26li30b9pcop36pj5c4pm4eb56g",
   "status": "tentative",
   "htmlLink": "https://www.google.com/calendar/event?eid=NmdwbTJjajRja3FqNGI5cGM4cmoyYjlrNnNxMzRiYjI2bGkzMGI5cGNvcDM2cGo1YzRwbTRlYjU2ZyBrMWVyYW4ud2gxN2VAbQ",
   "created": "2019-05-02T20:02:40.000Z",
   "updated": "2019-05-02T20:02:41.026Z",
   "summary": "Electricity for tom white",
   "creator": {
    "email": "k1eran.wh17e@gmail.com",
    "self": true
   },
   "organizer": {
    "email": "k1eran.wh17e@gmail.com",
    "self": true
   },
   "start": {
    "dateTime": "2019-05-06T18:00:00+01:00",
    "timeZone": "Europe/Dublin"
   },
   "end": {
    "dateTime": "2019-05-06T19:00:00+01:00",
    "timeZone": "Europe/Dublin"
   },
   "iCalUID": "6gpm2cj4ckqj4b9pc8rj2b9k6sq34bb26li30b9pcop36pj5c4pm4eb56g@google.com",
   "sequence": 1,
   "reminders": {
    "useDefault": false,
    "overrides": [
     {
      "method": "popup",
      "minutes": 10
     }
** Paging
*** The nextPageToken value returned is passed as a value to the pageToken argument of the http GET
*** [22:39:54] nostril-watcher:~/projects/rust/oauth2-rs$ ( curl -H "Authorization: Bearer ya29.GlwCB_KcVXncDP1aQb1eKcFhB97poJYQ0CK9ng2aQTaAmFl1v9aVpkjC54FG4XOjaDAtqJ3UPd1-nObRCvQuO9Vx9PsrEKs6m41W0cXK04vizyF7ZhdM5KoGyqMpcw Accept: application/json " "https://www.googleapis.com/calendar/v3/calendars/primary/events?timeMin=2019-05-05T23:59:59-00:00&timeMax=2019-05-07T00:00:00-00:00&maxResults=1&singleEvents=true&pageToken=CkgKOjZncG0yY2o0Y2txajRiOXBjOHJqMmI5azZzcTM0YmIyNmxpMzBiOXBjb3AzNnBqNWM0cG00ZWI1NmcYASCAgICBz8jo0xYaDQgAEgAYmO3pwbWF4gI=" )|less
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  1459  100  1459    0     0   6513      0 --:--:-- --:--:-- --:--:--  6542
{
 "kind": "calendar#events",
 "etag": "\"p32cerqe1mm2u40g\"",
 "summary": "k1eran.wh17e@gmail.com",
 "updated": "2019-05-05T22:17:08.751Z",
 "timeZone": "Europe/London",
 "accessRole": "owner",
 "defaultReminders": [
  {
   "method": "popup",
   "minutes": 30
  }
 ],
 "nextPageToken": "CkgKOmNvb204cGhnYzhzMzZiOWs2OG9qY2I5a2M4cG00YmIxNmNvM2diYjY3NWozMnAzNDcxZ2o4ZWI2NjQYASCAgMDsrJf60xYaDQgAEgAYmO3pwbWF4gI=",
 "items": [
  {
   "kind": "calendar#event",
   "etag": "\"3113802488178000\"",
   "id": "coom8phgc8s36b9k68ojcb9kc8pm4bb16co3gbb675j32p3471gj8eb664",
   "status": "tentative",
   "htmlLink": "https://www.google.com/calendar/event?eid=Y29vbThwaGdjOHMzNmI5azY4b2pjYjlrYzhwbTRiYjE2Y28zZ2JiNjc1ajMycDM0NzFnajhlYjY2NCBrMWVyYW4ud2gxN2VAbQ",
   "created": "2019-05-03T16:34:04.000Z",
   "updated": "2019-05-03T16:34:04.121Z",
   "summary": "Laptop adapter",
   "creator": {
    "email": "k1eran.wh17e@gmail.com",
    "self": true
   },
   "organizer": {
    "email": "k1eran.wh17e@gmail.com",
    "self": true
   },
   "start": {
    "dateTime": "2019-05-06T23:00:00+01:00",
    "timeZone": "Europe/Dublin"
   },
   "end": {
    "dateTime": "2019-05-07T00:00:00+01:00",
    "timeZone": "Europe/Dublin"
   },
   "iCalUID": "coom8phgc8s36b9k68ojcb9kc8pm4bb16co3gbb675j32p3471gj8eb664@google.com",
   "sequence": 1,
   "reminders": {
    "useDefault": false,
    "overrides": [
     {
      "method": "popup",
      "minutes": 10
     }
    ]
   }
  }
 ]
}
